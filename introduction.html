<!DOCTYPE HTML><html lang=en class="sidebar-visible no-js light"><head><meta charset=UTF-8><title>Introduction - GNU SED</title><meta content="text/html; charset=utf-8"http-equiv=Content-Type><meta name=description content="Example based guide to mastering GNU SED"><meta name=viewport content="width=device-width, initial-scale=1"><meta name=theme-color content=#ffffff><link rel=icon href=favicon.svg><link rel="shortcut icon"href=favicon.png><link rel=stylesheet href=css/variables.css><link rel=stylesheet href=css/general.css><link rel=stylesheet href=css/chrome.css><link rel=stylesheet href=FontAwesome/css/font-awesome.css><link rel=stylesheet href=fonts/fonts.css><link rel=stylesheet href=highlight.css><link rel=stylesheet href=tomorrow-night.css><link rel=stylesheet href=ayu-highlight.css><link rel=stylesheet href=style.css><body><script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script><script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script><script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script><script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script><nav id=sidebar class=sidebar aria-label="Table of contents"><div class=sidebar-scrollbox><ol class=chapter><li class="chapter-item expanded affix"><a href=cover.html>Cover</a><li class="chapter-item expanded affix"><a href=buy.html>Buy PDF/EPUB versions</a><li class="chapter-item expanded"><a href=preface.html><strong aria-hidden=true>1.</strong> Preface</a><li class="chapter-item expanded"><a href=introduction.html class=active><strong aria-hidden=true>2.</strong> Introduction</a><li class="chapter-item expanded"><a href=in-place-file-editing.html><strong aria-hidden=true>3.</strong> In-place file editing</a><li class="chapter-item expanded"><a href=selective-editing.html><strong aria-hidden=true>4.</strong> Selective editing</a><li class="chapter-item expanded"><a href=breere-regular-expressions.html><strong aria-hidden=true>5.</strong> BRE/ERE Regular Expressions</a><li class="chapter-item expanded"><a href=flags.html><strong aria-hidden=true>6.</strong> Flags</a><li class="chapter-item expanded"><a href=shell-substitutions.html><strong aria-hidden=true>7.</strong> Shell substitutions</a><li class="chapter-item expanded"><a href=z-s-and-f-command-line-options.html><strong aria-hidden=true>8.</strong> z, s and f command line options</a><li class="chapter-item expanded"><a href=append-change-insert.html><strong aria-hidden=true>9.</strong> append, change, insert</a><li class="chapter-item expanded"><a href=adding-content-from-file.html><strong aria-hidden=true>10.</strong> Adding content from file</a><li class="chapter-item expanded"><a href=control-structures.html><strong aria-hidden=true>11.</strong> Control structures</a><li class="chapter-item expanded"><a href=processing-lines-bounded-by-distinct-markers.html><strong aria-hidden=true>12.</strong> Processing lines bounded by distinct markers</a><li class="chapter-item expanded"><a href=gotchas-and-tricks.html><strong aria-hidden=true>13.</strong> Gotchas and Tricks</a><li class="chapter-item expanded"><a href=further-reading.html><strong aria-hidden=true>14.</strong> Further Reading</a><li class="chapter-item expanded"><a href=Exercise_solutions.html><strong aria-hidden=true>15.</strong> Exercise Solutions</a></li><br><hr><li class="chapter-item expanded"><i id=git-repository-button class="fa fa-github"></i><a href=https://github.com/learnbyexample/learn_gnused>   Source code</a><li class="chapter-item expanded"><i id=home-button class="fa fa-home"></i><a href=https://learnbyexample.github.io/>   My Blog</a><li class="chapter-item expanded"><i id=book-button class="fa fa-book"></i><a href=https://learnbyexample.github.io/books/>   My Books</a><li class="chapter-item expanded"><i id=mail-button class="fa fa-envelope"></i><a href=https://learnbyexample.gumroad.com/l/learnbyexample-weekly>   learnbyexample weekly</a></ol></div><div id=sidebar-resize-handle class=sidebar-resize-handle></div></nav><div id=page-wrapper class=page-wrapper><div class=page><div id=menu-bar-hover-placeholder></div><div id=menu-bar class="menu-bar sticky bordered"><div class=left-buttons><button id=sidebar-toggle class=icon-button type=button title="Toggle Table of Contents"aria-label="Toggle Table of Contents"aria-controls=sidebar><i class="fa fa-bars"></i></button><button id=theme-toggle class=icon-button type=button title="Change theme"aria-label="Change theme"aria-haspopup=true aria-expanded=false aria-controls=theme-list><i class="fa fa-paint-brush"></i></button><ul id=theme-list class=theme-popup aria-label=Themes role=menu><li role=none><button role=menuitem class=theme id=light>Light (default)</button><li role=none><button role=menuitem class=theme id=rust>Rust</button><li role=none><button role=menuitem class=theme id=coal>Coal</button><li role=none><button role=menuitem class=theme id=navy>Navy</button><li role=none><button role=menuitem class=theme id=ayu>Ayu</button></ul><button id=search-toggle class=icon-button type=button title="Search. (Shortkey: s)"aria-label="Toggle Searchbar"aria-expanded=false aria-keyshortcuts=S aria-controls=searchbar><i class="fa fa-search"></i></button></div><h1 class=menu-title>GNU SED</h1><div class=right-buttons><a href=https://learnbyexample.github.io title=Blog aria-label=Blog> <i id=home-button class="fa fa-home"></i> </a><a href=https://github.com/learnbyexample/learn_gnused title="Git repository"aria-label="Git repository"> <i id=git-repository-button class="fa fa-github"></i> </a></div></div><div id=search-wrapper class=hidden><form id=searchbar-outer class=searchbar-outer><input type=search id=searchbar name=searchbar placeholder="Search this book ..."aria-controls=searchresults-outer aria-describedby=searchresults-header></form><div id=searchresults-outer class="searchresults-outer hidden"><div id=searchresults-header class=searchresults-header></div><ul id=searchresults></ul></div></div><script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script><div id=content class=content><main><div class=sidetoc><nav class=pagetoc></nav></div><h1 id=introduction><a class=header href=#introduction>Introduction</a></h1><p>The command name <code>sed</code> is derived from <strong>s</strong>tream <strong>ed</strong>itor. Here, stream refers to data being passed via shell pipes. Thus, the command's primary functionality is to act as a text editor for <strong>stdin</strong> data with <strong>stdout</strong> as the output target. Over the years, functionality was added to edit file input and save the changes back to the same file.<p>This chapter will cover how to install/upgrade <code>sed</code> followed by details related to documentation. Then, you'll get an introduction to the <strong>substitute</strong> command, which is the most commonly used <code>sed</code> feature. The chapters to follow will add more details to the substitute command, discuss other commands and command line options. Cheatsheet, summary and exercises are also included at the end of these chapters.<h2 id=installation><a class=header href=#installation>Installation</a></h2><p>If you are on a Unix like system, you are most likely to already have some version of <code>sed</code> installed. This book is primarily for <code>GNU sed</code>. As there are syntax and feature differences between various implementations, please make sure to follow along with what is presented here. <code>GNU sed</code> is part of <a href=https://www.gnu.org/manual/manual.html>text creation and manipulation</a> commands provided by <code>GNU</code> and comes by default on GNU/Linux. To install newer or particular version, visit <a href=https://www.gnu.org/software/sed/>gnu: software</a>. Check <a href=https://savannah.gnu.org/news/?group=sed>release notes</a> for an overview of changes between versions. See also <a href=https://debbugs.gnu.org/cgi/pkgreport.cgi?package=sed>bug list</a>.<pre><code class=language-bash>$ # use a dir, say ~/Downloads/sed_install before following the steps below
$ wget https://ftp.gnu.org/gnu/sed/sed-4.8.tar.xz
$ tar -Jxf sed-4.8.tar.xz
$ cd sed-4.8/
$ ./configure 
$ make
$ sudo make install

$ type -a sed
sed is /usr/local/bin/sed
sed is /bin/sed
$ sed --version | head -n1
sed (GNU sed) 4.8
</code></pre><p>If you are not using a Linux distribution, you may be able to access <code>GNU sed</code> using below options:<ul><li><a href=https://gitforwindows.org/>git-bash</a><li><a href=https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux>WSL</a><li><a href=https://brew.sh/>brew</a></ul><h2 id=documentation-and-options-overview><a class=header href=#documentation-and-options-overview>Documentation and options overview</a></h2><p>It is always a good idea to know where to find the documentation. From command line, you can use <code>man sed</code> for a short manual and <code>info sed</code> for full documentation. I prefer using the <a href=https://www.gnu.org/software/sed/manual/sed.html>online GNU sed manual</a> which feels much easier to use and navigate.<pre><code class=language-bash>$ man sed
SED(1)                          User Commands                         SED(1)  

NAME
       sed - stream editor for filtering and transforming text

SYNOPSIS
       sed [OPTION]... {script-only-if-no-other-script} [input-file]...

DESCRIPTION
       Sed  is  a  stream  editor.  A stream editor is used to perform basic
       text transformations on an input stream (a file or input from a pipe‐
       line).   While  in  some  ways  similar  to  an  editor which permits
       scripted edits (such as ed), sed works by making only one  pass  over
       the  input(s),  and  is consequently more efficient.  But it is sed's
       ability to filter text in a pipeline which particularly distinguishes
       it from other types of editors.
</code></pre><p>For a quick overview of all the available options, use <code>sed --help</code> from the command line. Most of them will be explained in the coming chapters.<pre><code class=language-bash>$ # only partial output shown here
$ sed --help
  -n, --quiet, --silent
                 suppress automatic printing of pattern space
      --debug
                 annotate program execution
  -e script, --expression=script
                 add the script to the commands to be executed
  -f script-file, --file=script-file
                 add the contents of script-file to the commands to be executed
  --follow-symlinks
                 follow symlinks when processing in place
  -i[SUFFIX], --in-place[=SUFFIX]
                 edit files in place (makes backup if SUFFIX supplied)
  -l N, --line-length=N
                 specify the desired line-wrap length for the 'l' command
  --posix
                 disable all GNU extensions.
  -E, -r, --regexp-extended
                 use extended regular expressions in the script
                 (for portability use POSIX -E).
  -s, --separate
                 consider files as separate rather than as a single,
                 continuous long stream.
      --sandbox
                 operate in sandbox mode (disable e/r/w commands).
  -u, --unbuffered
                 load minimal amounts of data from the input files and flush
                 the output buffers more often
  -z, --null-data
                 separate lines by NUL characters
      --help     display this help and exit
      --version  output version information and exit

If no -e, --expression, -f, or --file option is given, then the first
non-option argument is taken as the sed script to interpret.  All
remaining arguments are names of input files; if no input files are
specified, then the standard input is read.
</code></pre><h2 id=editing-standard-input><a class=header href=#editing-standard-input>Editing standard input</a></h2><p><code>sed</code> has various commands to manipulate text input. <strong>substitute</strong> command is most commonly used, which will be briefly discussed in this chapter. It is used to replace matching text with something else. The syntax is <code>s/REGEXP/REPLACEMENT/FLAGS</code> where<ul><li><code>s</code> stands for <strong>substitute</strong> command<li><code>/</code> is an idiomatic delimiter character to separate various portions of the command<li><code>REGEXP</code> stands for <strong>regular expression</strong><li><code>REPLACEMENT</code> specifies the replacement string<li><code>FLAGS</code> are options to change default behavior of the command</ul><p>For now, it is enough to know that the <code>s</code> command is used for search and replace operations.<pre><code class=language-bash>$ # sample command output for stream editing
$ printf '1,2,3,4\na,b,c,d\n'
1,2,3,4
a,b,c,d

$ # for each input line, change only the first ',' to '-'
$ printf '1,2,3,4\na,b,c,d\n' | sed 's/,/-/'
1-2,3,4
a-b,c,d

$ # change all matches by adding the 'g' flag
$ printf '1,2,3,4\na,b,c,d\n' | sed 's/,/-/g'
1-2-3-4
a-b-c-d
</code></pre><p>Here sample input is created using <code>printf</code> command to showcase stream editing. By default, <code>sed</code> processes input line by line. To determine a line, <code>sed</code> uses the <code>\n</code> newline character. The first <code>sed</code> command replaces only the first occurrence of <code>,</code> with <code>-</code>. The second command replaces all occurrences as the <code>g</code> flag is also used (<code>g</code> stands for <code>global</code>).<blockquote><p><img src=images/warning.svg alt=warning> If you have a file with a different line ending style, you'll need to preprocess it first. For example, a text file downloaded from internet or a file originating from Windows OS would typically have lines ending with <code>\r\n</code> (carriage return + line feed). Modern text editors, IDEs and word processors can handle both styles easily. But every character matters when it comes to command line text processing. See <a href=https://stackoverflow.com/q/45772525/4082052>stackoverflow: Why does my tool output overwrite itself and how do I fix it?</a> for a detailed discussion and mitigation methods.</blockquote><blockquote><p><img src=images/info.svg alt=info> As a good practice, always use single quotes around the script to prevent shell interpretation. Other variations will be discussed later.</blockquote><h2 id=editing-file-input><a class=header href=#editing-file-input>Editing file input</a></h2><p>Although <code>sed</code> derives its name from <em>stream editing</em>, it is common to use <code>sed</code> for file editing. To do so, append one or more input filenames to the command. You can also specify <code>stdin</code> as a source by using <code>-</code> as the filename. By default, output will go to <code>stdout</code> and the input files will not be modified. <a href=./in-place-file-editing.html#in-place-file-editing>In-place file editing</a> chapter will discuss how to apply the changes back to the source file(s).<blockquote><p><img src=images/info.svg alt=info> Sample input files used in examples are available from <a href=https://github.com/learnbyexample/learn_gnused/tree/master/example_files>learn_gnused repo</a>.</blockquote><pre><code class=language-bash>$ cat greeting.txt
Hi there
Have a nice day

$ # for each line, change first occurrence of 'day' with 'weekend'
$ sed 's/day/weekend/' greeting.txt
Hi there
Have a nice weekend

$ # change all 'e' to 'E' and save changed text to another file
$ sed 's/e/E/g' greeting.txt > out.txt
$ cat out.txt
Hi thErE
HavE a nicE day
</code></pre><p>In the <code>stdin</code> section examples, every input line had matched the search expression. The first <code>sed</code> command here searched for <code>day</code>, which did not match the first line of <code>greeting.txt</code> file input. By default, even if a line didn't satisfy the search expression, it will be part of the output. You'll see how to get only the modified lines in <a href=./selective-editing.html#print-command>Print command</a> section.<h2 id=cheatsheet-and-summary><a class=header href=#cheatsheet-and-summary>Cheatsheet and summary</a></h2><table><thead><tr><th>Note<th>Description<tbody><tr><td><code>man sed</code><td>brief manual<tr><td><code>sed --help</code><td>brief description of all the command line options<tr><td><code>info sed</code><td>comprehensive manual<tr><td><a href=https://www.gnu.org/software/sed/manual/sed.html>online GNU sed manual</a><td>well formatted, easier to read and navigate<tr><td><code>s/REGEXP/REPLACEMENT/FLAGS</code><td>syntax for substitute command<tr><td><code>sed 's/,/-/'</code><td>replace first <code>,</code> with <code>-</code><tr><td><code>sed 's/,/-/g'</code><td>replace all <code>,</code> with <code>-</code></table><p>This introductory chapter covered installation process, documentation and how to search and replace basic text using <code>sed</code> from the command line. In coming chapters, you'll learn many more commands and features that make <code>sed</code> an important tool when it comes to command line text processing. One such feature is editing files in-place, which will be discussed in the next chapter.<h2 id=exercises><a class=header href=#exercises>Exercises</a></h2><blockquote><p><img src=images/info.svg alt=info> Exercise related files are available from <a href=https://github.com/learnbyexample/learn_gnused/tree/master/exercises>exercises folder of learn_gnused repo</a>.</blockquote><blockquote><p><img src=images/info.svg alt=info> All the exercises are also collated together in one place at <a href=https://github.com/learnbyexample/learn_gnused/blob/master/exercises/Exercises.md>Exercises.md</a>. For solutions, see <a href=https://github.com/learnbyexample/learn_gnused/blob/master/exercises/Exercise_solutions.md>Exercise_solutions.md</a>.</blockquote><p><strong>a)</strong> Replace <code>5</code> with <code>five</code> for the given stdin source.<pre><code class=language-bash>$ echo 'They ate 5 apples' | sed ##### add your solution here
They ate five apples
</code></pre><p><strong>b)</strong> Replace all occurrences of <code>0xA0</code> with <code>0x50</code> and <code>0xFF</code> with <code>0x7F</code> for the given input file.<pre><code class=language-bash>$ cat hex.txt
start address: 0xA0, func1 address: 0xA0
end address: 0xFF, func2 address: 0xB0

$ sed ##### add your solution here
start address: 0x50, func1 address: 0x50
end address: 0x7F, func2 address: 0xB0
</code></pre><p><strong>c)</strong> The substitute command searches and replaces sequences of characters. When you need to map one or more characters with another set of corresponding characters, you can use the <code>y</code> command. Quoting from the manual:<blockquote><p><strong>y/src/dst/</strong> Transliterate any characters in the pattern space which match any of the source-chars with the corresponding character in dest-chars.</blockquote><p>Use the <code>y</code> command to transform the given input string to get the output string as shown below.<pre><code class=language-bash>$ echo 'goal new user sit eat dinner' | sed ##### add your solution here
gOAl nEw UsEr sIt EAt dInnEr
</code></pre></main><nav class=nav-wrapper aria-label="Page navigation"><a rel=prev href=preface.html class="mobile-nav-chapters previous"title="Previous chapter"aria-label="Previous chapter"aria-keyshortcuts=Left> <i class="fa fa-angle-left"></i> </a><a rel=next href=in-place-file-editing.html class="mobile-nav-chapters next"title="Next chapter"aria-label="Next chapter"aria-keyshortcuts=Right> <i class="fa fa-angle-right"></i> </a><div style="clear: both"></div></nav></div></div><nav class=nav-wide-wrapper aria-label="Page navigation"><a rel=prev href=preface.html class="nav-chapters previous"title="Previous chapter"aria-label="Previous chapter"aria-keyshortcuts=Left> <i class="fa fa-angle-left"></i> </a><a rel=next href=in-place-file-editing.html class="nav-chapters next"title="Next chapter"aria-label="Next chapter"aria-keyshortcuts=Right> <i class="fa fa-angle-right"></i> </a></nav></div><script>
            window.playground_copyable = true;
        </script><script src=elasticlunr.min.js charset=utf-8></script><script src=mark.min.js charset=utf-8></script><script src=searcher.js charset=utf-8></script><script src=clipboard.min.js charset=utf-8></script><script src=highlight.js charset=utf-8></script><script src=book.js charset=utf-8></script><script src=sidebar.js></script>